<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>SysVinit vs. SystemD</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/init.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section class="intro" data-transition="zoom">
            <h1>SysVinit vs. SystemD</h1>
            <h2>La petite histoire des systèmes d'initialisation</h2>
            <h4>Par</h4>
                <h5 style="font-size: 0.8em;">Paul Delafosse, Thibaut Strecker et Lucas Declercq</h5>
            <img id="cnam-logo" src="images/logo_cnam.png">
        </section>
        <section data-background-color="#a64d79">
            <section class="concave">
                <h1>Qu'est ce qu'un système d'initialisation ?</h1>
            </section>
            <section>
                <p>
                    Le système d'initialisation est le premier processus démarré après le démarrage du kernel. Dans les
                    faits, ce processus prend le PID 1 sur le système. Il est toujours lancé par le kernel de Linux,
                    après les premières étapes de boot réalisées par le BIOS et le bootloader.
                </p>
            </section>
            <section class="concave">
                <p>
                    Ce processus
                    doit toujours être actif.
                    Si jamais PID 1 est interrompu on entre alors en Kernel Panic !
                </p>
            </section>
            <section>
                BOMB GIF
            </section>
            <section>
                <h4>Pourquoi ce processus est-il si vital ?</h4>
                <p class="fragment">Un processus est toujours créé par un autre, appelé son processus père.</p>
                <p class="fragment">Exception faite du processus initial qui est le père de tous les autres !</p>
            </section>
            <section>
                I AM YOUR FATHER GIF
            </section>
            <section>
                <h3>Les roles d'un système d'initialisation :</h3>
                <p class="fragment">Il démarre le reste des processus nécessaire au lancement du système
                    d'exploitation</p>
                <p class="fragment">Il gère le cycle de vie des autres processus</p>
                <p class="fragment">Il gère le nettoyage des processus orphelins (processus zombies)</p>
                <p class="fragment">Il a aussi un rôle de monitoring</p>
            </section>
        </section>
        <section data-background-color="#783f04">
            <section>
                <h1>SysVinit</h1></section>
            <section>
                <h3>Un peu d'histoire ...</h3>
                <p class="fragment">Init fait référence à SysV int, le système d’initialisation de SystemV le premier
                    système d’exploitation Unix commercial.</p>
                <p class="fragment">SysV a connu 4 versions majeures depuis la première en 1983, dont la quatrième
                    (SRV4) a été le principal succès commercial, soutenu par les principaux vendeurs de systèmes
                    Unix.</p>
            </section>
            <section>
                <p>Init est donc un très vieux système !</p>
                OLD GIF
            </section>
            <section>
                <p>On peut découper Init en deux composants principaux :</p>
                <ul>
                    <li class="fragment">Les runlevels</li>
                    <li class="fragment">Les scripts d'initialisation</li>
                </ul>
            </section>
            <section>
                <h3>Les Runlevels</h3>
                <p class="fragment">Un runlevel est un des modes dans lequel un système Unix s'exécute. Chaque runlevel
                    possède un
                    certain nombre de processus actifs ou stoppés.</p>
                <p class="fragment">Après que le kernel a démarré, init lit le fichier /etc/inittab pour déterminer le
                    comportement de
                    chaque runlevel ainsi que le runlevel par défaut.</p>
                <p class="fragment">
                    À moins que l'utilisateur ait spécifié un paramètre spécial au démarrage, le système va essayer de
                    démarrer au runlevel par défaut (ex : 3 pour les systèmes Red Hat)
                </p>
            </section>
            <section>
                <h3>
                    Il existe 8 runlevels : 0 à 7 :
                </h3>
                <table class="reveal">
                    <thead></thead>
                    <tr>
                        <th>Runlevel</th>
                        <th>Mode</th>
                        <th>Actions</th>
                    </tr>
                    <tbody>
                    <tr>
                        <td>0</td>
                        <td>Halt</td>
                        <td>Éteint le système</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Single-User Mode</td>
                        <td>Pas de réseau, de daemons ou d'autre utilisateur que root</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Multi-User Mode</td>
                        <td>Ne configure pas le réseau ou les daemons</td>
                    <tr>
                        <td>3</td>
                        <td>Multi-User Mode with Networking</td>
                        <td>Démarre le système normalement</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Undefined</td>
                        <td>Pas utilisé</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>X11</td>
                        <td>Comme le runlevel 3 + interface graphique</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Reboot</td>
                        <td>Redémarre le système</td>
                    </tr>
                    </tbody>
                </table>
            </section>
            <section>
                <h3>Comment démarrent nos applications ?</h3>
                <p class="fragment">Les applications qui sont démarrés par init ont leur scripts placés dans le dossier /etc/rc.d. Dans
                    ce dossier il y a un dossier pour chaque runlevel : rc0.d, rc1.d etc..
                    Comment lancer des applications au démarrage avec init ?</p>
                <p class="fragment">Si le système démarre par défaut au niveau 3, il faut donc que le script de notre application soit
                    présent dans le dossier rc3.d.</p>
                <small class="fragment">(On peut aussi utiliser un lien symbolique)</small>
            </section>
            <section>
                <h3>Gérer tous ces dossiers, fichiers et liens symboliques parait compliqué...</h3>
                GIF CABLE MESS
            </section>
            <section>
                <h3>Rassurez vous, on peu simplifier !</h3>
                GIF BABY IDEA
            </section>
            <section>
                <p>Grâce à <b>chkconfig</b> on peut visualiser l'activation ou non des scripts pour chaque
                    <b>runlevel</b> :</p>
                <pre><code data-trim data-noescape>root@host:~ # chkconfig --list
filelimits 0:off 1:off 2:on 3:on 4:on 5:on 6:off
syslog 0:off 1:off 2:on 3:on 4:on 5:on 6:off
gpm 0:off 1:off 2:on 3:on 4:on 5:on 6:off
cpanel 0:off 1:off 2:off 3:on 4:on 5:on 6:off
kudzu 0:off 1:off 2:off 3:on 4:on 5:on 6:off
ntpd 0:off 1:off 2:off 3:off 4:off 5:off 6:off
netfs 0:off 1:off 2:off 3:on 4:on 5:on 6:off
network 0:off 1:off 2:on 3:on 4:on 5:on 6:off
netplugd 0:off 1:off 2:off 3:off 4:off 5:off 6:off
rawdevices 0:off 1:off 2:off 3:on 4:on 5:on 6:off
ipchains 0:off 1:off 2:on 3:on 4:on 5:on 6:off
iptables 0:off 1:off 2:on 3:on 4:on 5:on 6:off
crond 0:off 1:off 2:on 3:on 4:on 5:on 6:off
anacron 0:off 1:off 2:on 3:on 4:on 5:on 6:off
cups 0:off 1:off 2:on 3:on 4:on 5:on 6:off
xfs 0:off 1:off 2:on 3:on 4:on 5:on 6:off
xinetd 0:off 1:off 2:off 3:on 4:on 5:on 6:off
httpd 0:off 1:off 2:off 3:on 4:off 5:on 6:off
	            </code></pre>
            </section>
        </section>
        <section data-background-color="#3d85c6"><h1>SystemD</h1></section>
        <section data-background-color="#6aa84f"><h1>Travaux Pratiques</h1></section>
        <section data-background-color="#8e7cc3"><h1>Questions ?</h1></section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // More info about config & dependencies:
  // - https://github.com/hakimel/reveal.js#configuration
  // - https://github.com/hakimel/reveal.js#dependencies
  Reveal.initialize({
    dependencies: [
      {src: 'plugin/markdown/marked.js'},
      {src: 'plugin/markdown/markdown.js'},
      {src: 'plugin/notes/notes.js', async: true},
      {
        src: 'plugin/highlight/highlight.js', async: true, callback: function () {
          hljs.initHighlightingOnLoad();
        }
      }
    ]
  });

  Reveal.configure({
    slideNumber: 'c/t'
  });
</script>
</body>
</html>
